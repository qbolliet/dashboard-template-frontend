@use '../../../styles/utils/breakpoints' as *;
@use '../../../styles/globals/typography';

// ===== NAVIGATION CONTAINER =====
.navigation-container {
    position: relative;
    z-index: var(--z-fixed);
    
    // Sur mobile/tablet, étendre sur toute la largeur pour positionner le toggle
    @include breakpoint-down('medium') {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 100%;
        pointer-events: none; // Permet aux autres éléments du header d'être cliquables
    }
    

    // Positionnement du mobile toggle - absolute pour rester en haut de page
    .mobile-nav-toggle {
        pointer-events: auto; // Réactive les clics pour le toggle
        
        // Sur desktop, masquer le toggle
        @include breakpoint('large') {
            display: none;
        }

        // Sur mobile/tablet, positionner de façon absolue par rapport au header
        @include breakpoint-down('medium') {
            position: absolute;
            top: 50%;
            right: var(--spacing-lg); // Aligné avec le padding du header
            transform: translateY(-50%);
            z-index: calc(var(--z-modal) + 1);
        }
        
        // Sur très petits écrans, ajuster la position pour le padding réduit
        @include breakpoint-down('small') {
            right: var(--spacing-md); // Aligné avec le padding mobile du header
        }
    }

    .primary-navigation--open {
        // Positionnement du mobile toggle - fixe pour rester toujours visible
        .mobile-nav-toggle {
            // pointer-events: auto; // Réactive les clics pour le toggle
            
            // // Sur desktop, masquer le toggle
            // @include breakpoint('large') {
            //     display: none;
            // }
            
            // Sur mobile/tablet, positionner de façon fixe pour qu'il reste visible même en scrollant
            @include breakpoint-down('medium') {
                position: fixed;
                top: var(--spacing-lg); // Distance depuis le haut de la fenêtre
                right: var(--spacing-lg); // Distance depuis la droite de la fenêtre
                z-index: calc(var(--z-modal) + 2); // Au-dessus du menu de navigation et des dropdowns
                
                // S'assurer qu'il reste visible pendant l'animation du menu
                transition: opacity var(--transition-fast) ease;
            }
            
            // Sur très petits écrans, ajuster la position pour un meilleur alignement
            @include breakpoint-down('small') {
                top: var(--spacing-md);
                right: var(--spacing-md);
            }
        }
    }
    
    
    // ===== MENU DE NAVIGATION =====
    .primary-navigation {
        pointer-events: auto; // Réactive les clics pour le menu
        
        // Sur desktop - navigation horizontale inline
        @include breakpoint('large') {
            position: static;
            width: auto;
            height: auto;
            background: transparent;
            box-shadow: none;
            padding: 0;
            overflow: visible;
            transform: none;
            transition: none;
            z-index: auto;
        }
        
        // Sur mobile/tablet - menu overlay fixe
        @include breakpoint-down('medium') {
            position: fixed;
            top: 0;
            right: 0;
            width: 280px;
            height: 100vh;
            background-color: hsl(var(--nav-mobile-bg));
            z-index: var(--z-modal);
            box-shadow: -4px 0 20px hsla(var(--nav-mobile-shadow) / 0.1);
            // Padding ajusté pour éviter le chevauchement avec le bouton de fermeture fixe
            padding: calc(var(--spacing-6xl) + var(--spacing-lg)) var(--spacing-lg) var(--spacing-xl) var(--spacing-lg);
            
            // Gestion du défilement - seulement pour la navigation
            overflow-y: auto;
            overflow-x: hidden;
            
            // Animation depuis la droite - fermé par défaut
            transform: translateX(100%);
            transition: transform var(--transition-normal) ease;
            
            // État ouvert - slide in from right
            &.primary-navigation--open {
                transform: translateX(0);
            }
        }
        
        // Sur très petits écrans - pleine largeur
        @include breakpoint-down('small') {
            width: 100vw;
            right: 0;
        }
    }
}