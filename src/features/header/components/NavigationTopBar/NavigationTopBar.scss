// ===== IMPORTS =====
@use '../../../../styles/globals/colors';
@use '../../../../styles/utils/breakpoints';

// ===== VARIABLES LOCALES =====
// Taille tactile recommandée pour le bouton mobile (44px minimum pour l'accessibilité)
$mobile-toggle-size: calc(var(--spacing-3xl) + var(--spacing-xs)); // 32px + 4px = 36px

// ===== BOUTON TOGGLE MOBILE =====
.mobile-nav-toggle {
  // Masqué par défaut sur desktop
  display: none;
  
  // Réinitialisation des styles de bouton
  background: none;
  border: none;
  cursor: pointer;
  
  // Espacement et forme en utilisant les variables système
  padding: var(--spacing-sm);
  border-radius: var(--border-radius-sm);
  
  // Transitions fluides avec variables système
  transition: background-color var(--transition-normal) ease;
  
  // Couleur des icônes depuis le système de couleurs
  color: hsl(var(--nav-hamburger-color));
  
  // États d'interaction
  &:hover {
    background-color: hsl(var(--nav-hamburger-bg-hover));
  }
  
  &:focus {
    outline: var(--spacing-2px) solid hsl(var(--nav-hamburger-border-focus));
    outline-offset: var(--spacing-2px);
  }
  
  // Conteneur pour les icônes SVG
  .nav-icon {
    display: block;
    width: var(--spacing-xl); // 20px
    height: var(--spacing-lg); // 16px pour hamburger
    transition: opacity var(--transition-fast) ease;
    
    // Assurer que les SVG utilisent la couleur du parent
    svg {
      width: 100%;
      height: 100%;
    }
  }
  
  // Animation entre les icônes
  .hamburger-icon {
    opacity: 1;
  }
  
  .close-icon {
    opacity: 0;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
  
  // États quand le menu est ouvert
  &[aria-expanded="true"] {
    .hamburger-icon {
      opacity: 0;
    }
    
    .close-icon {
      opacity: 1;
    }
  }
}

// ===== MENU DE NAVIGATION =====
.nav-menu {
  // État normal (desktop)
  .primary-navigation {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: var(--spacing-2xl); // 24px pour espacement entre éléments
    align-items: center;
  }
}

// ===== OVERLAY MOBILE =====
.nav-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  
  // Couleur d'overlay depuis le système de couleurs avec opacité
  background-color: hsl(var(--nav-overlay-bg) / 0.5);
  
  // Z-index depuis les variables système
  z-index: calc(var(--z-dropdown) - 1); // 999
  
  // Animation d'apparition
  opacity: 0;
  animation: fadeIn var(--transition-slow) ease forwards;
  
  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }
}

// ===== CLASSE UTILITAIRE POUR L'ACCESSIBILITÉ =====
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// ===== RESPONSIVE =====

// Tablette et mobile - utilisation des breakpoints du projet  
@include breakpoints.breakpoint-down(medium) {
  // Afficher le bouton toggle avec positionnement fixe à droite
  .mobile-nav-toggle {
    display: block;
    position: fixed;
    
    // Positionnement avec variables système
    //top: 0; //var(--spacing-md); // 12px
    right: var(--spacing-lg); // 16px
    
    // Z-index au-dessus du menu mobile et de l'overlay
    z-index: calc(var(--z-dropdown) + 1); // 1001
    
    // Taille du bouton tactile
    width: $mobile-toggle-size;
    height: $mobile-toggle-size;
  }
  
  // Transformer le menu en sidebar mobile
  .nav-menu {
    position: fixed;
    top: 0;
    right: -100%; // Départ hors écran
    
    // Largeur en utilisant les variables système (approximation de 280px)
    width: calc(var(--spacing-5xl) * 5 + var(--spacing-3xl)); // ~280px
    height: 100vh;
    
    // Couleurs depuis le système
    background-color: hsl(var(--nav-mobile-bg));
    box-shadow: calc(var(--spacing-xs) * -1) 0 var(--spacing-sm) hsl(var(--nav-mobile-shadow) / 0.1);
    
    // Transition avec variable système
    transition: right var(--transition-slow) ease;
    
    // Z-index depuis les variables système
    z-index: var(--z-dropdown); // 1000
    overflow-y: auto;
    
    // État ouvert
    &.nav-menu--open {
      right: 0;
    }
    
    // Réorganisation de la navigation en colonne
    .primary-navigation {
      flex-direction: column;
      align-items: stretch;
      padding: var(--spacing-5xl) 0; // 32px vertical
      gap: 0;
      height: 100%;
    }
  }
}

// Mobile uniquement - très petits écrans
@include breakpoints.breakpoint-down(small) {
  .nav-menu {
    // Pleine largeur sur très petits écrans
    width: 100vw;
    
    .primary-navigation {
      // Espacement réduit sur très petits écrans
      padding: var(--spacing-4xl) 0; // 40px vertical
    }
  }
}

// ===== STYLES TERMINÉS =====
// Les couleurs et variables sont maintenant gérées dans le système de design global
// Voir src/styles/globals/colors.scss pour les variables de couleurs de navigation